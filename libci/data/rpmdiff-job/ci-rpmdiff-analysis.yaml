---

- job:
    name: 'ci-rpmdiff-analysis'
    node: rpmdiff
    description: |
        RPMdiff analysis job

        Runs RPMdiff analysis of given brew task.
    concurrent: true
    display-name: 'ci-rpmdiff-analysis'
    parameters:
      - string:
          name: id
          default: ''
          description: 'Brew task ID.'
    builders:
      - shell: |
          citool -i -o citool-debug.txt envinject jenkins brew --id $id brew-build-name \
                 rpmdiff --type analysis notify-ci-bus
      - inject:
          properties-file: envinject-citool.props
    publishers:
      - archive:
          artifacts: '**/**'
          allow-empty: 'true'
    wrappers:
      - workspace-cleanup
